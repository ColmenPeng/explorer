<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Nov 13, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20131113" />
    <meta http-equiv="Content-Language" content="en" />
    <title>OpenSocial Explorer Site - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
    
    <a href="http://github.com/OpenSocial/explorer">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://opensocial.org/wp-content/themes/Lucid/images/logo.png" id="bannerLeft">
                                                                                        <img src="http://opensocial.org/wp-content/themes/Lucid/images/logo.png"  alt="OpenSocial" width="250" height="180"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-11-13</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Get The OSE</li>
                                
      <li>
    
                          <a href="../download.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                              <li class="nav-header">Developer Resources</li>
                                
      <li>
    
                          <a href="../developer/getting-started.html" title="Getting Started">
          <i class="none"></i>
        Getting Started</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Writing Unit Tests</a>
          </li>
                  
      <li>
    
                          <a href="../developer/adding-gadget-specs.html" title="Adding Gadget Specs">
          <i class="none"></i>
        Adding Gadget Specs</a>
            </li>
                  
      <li>
    
                          <a href="../developer/login.html" title="Logging In">
          <i class="none"></i>
        Logging In</a>
            </li>
                              <li class="nav-header">Committer Resources</li>
                                
      <li>
    
                          <a href="../committers/releases.html" title="Performing Releases">
          <i class="none"></i>
        Performing Releases</a>
            </li>
                  
      <li>
    
                          <a href="../committers/site.html" title="Publishing The Site">
          <i class="none"></i>
        Publishing The Site</a>
            </li>
                                        <li class="nav-header">Modules</li>
                                
      <li>
    
                          <a href="../java/opensocial-explorer-server/index.html" title="OpenSocial Explorer Server">
          <i class="none"></i>
        OpenSocial Explorer Server</a>
            </li>
                  
      <li>
    
                          <a href="../java/opensocial-explorer-gadget-spec-server/index.html" title="OpenSocial Gadget Spec Server">
          <i class="none"></i>
        OpenSocial Gadget Spec Server</a>
            </li>
                  
      <li>
    
                          <a href="../opensocial-explorer-gadget-specs/index.html" title="OpenSocial Explorer Gadget Specs">
          <i class="none"></i>
        OpenSocial Explorer Gadget Specs</a>
            </li>
                  
      <li>
    
                          <a href="../opensocial-explorer-webcontent/index.html" title="OpenSocial Explorer Web Content">
          <i class="none"></i>
        OpenSocial Explorer Web Content</a>
            </li>
                  
      <li>
    
                          <a href="../opensocial-explorer-server-war/index.html" title="OpenSocial Explorer WAR Packaging">
          <i class="none"></i>
        OpenSocial Explorer WAR Packaging</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                    
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                      
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://opensocial.github.com/explorer/" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://opensocial.github.com/explorer/&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/opensocial" class="twitter-follow-button" data-show-count="false" data-align="left" data-size="medium" data-show-screen-name="false" data-lang="en">Follow opensocial</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License. --><h1>Writing Unit Tests</h1><p>One thing we will require of all contributions to the OpenSocial Explorer is that there are accompanying unit tests for code changes. For the Java code we use <a class="externalLink" href="http://junit.org/">JUnit 4</a> and for JavaScript we use <a class="externalLink" href="http://pivotal.github.com/jasmine/">Jasmine</a>.</p><div class="section"><h2>Java Unit Tests<a name="Java_Unit_Tests"></a></h2><p>There is nothing special about the way we use JUnit in the OpenSocial Explorer. We follow standard Maven conventions by placing our unit tests in each modules tests folder. In addition to JUnit we use a library called <a class="externalLink" href="http://www.easymock.org/">EasyMock</a> and an extension to EasyMock called <a class="externalLink" href="https://code.google.com/p/powermock/">PowerMock</a>. Both of these libraries allow developers to mock up certain pieces of functionality when unit testing. This allows for more complete unit tests since you are able to easy exerciese pieces of your code which might be hard to do otherwise.</p></div><div class="section"><h2>JavaScript Unit Tests<a name="JavaScript_Unit_Tests"></a></h2><p>Unit testing JavaScript code is a relatively new, but necessary technique. Unforunately Maven was originally intended only for Java projects so native support for JavaScript and unit testing your JavaScript is not provided out of the box. Luckily there are people who have written plugins to help out ;) In the OpenSocial Explorer we use Jasmine to unit test our JavaScript. More specifically we use the <a class="externalLink" href="http://searls.github.com/jasmine-maven-plugin/">Jasmine Maven Plugin</a> to do the integration of Jasmine into our Maven builds.</p><p>This plugin is configured in the POM of the opensocial-explorer-webcontent module. We provide our own testing <a class="externalLink" href="https://github.com/OpenSocial/explorer/blob/master/opensocial-explorer-webcontent/src/test/resources/DojoSpecRunner.htmltemplate">template</a> for running the tests. We do this because we want to make sure that we can properly configure Dojo so we can test our AMD modules. In actuallity this template is almost exactly the same as the one <a class="externalLink" href="http://searls.github.com/jasmine-maven-plugin/spec-runner-templates.html">provided by default with the Jasmine Maven Plugin for Require.js</a> AMD modules as noted in the comments at the top of our template.</p><div class="section"><h3>Jasmine Configuration<a name="Jasmine_Configuration"></a></h3><p>In the configuration of the Jasmine plugin we do a few things. First we exclude all the source files. This may seem odd at first but since we are testing AMD modules they should be loaded by the AMD loader and not Jasmine itself. We then include all the JavaScript test files but our loader will load them asynchronously instead of including them in the page directly. Lastly we include two JavaScript files into the page. The first one, <a class="externalLink" href="https://github.com/OpenSocial/explorer/blob/master/opensocial-explorer-webcontent/src/test/resources/jasmine-test-bootstrap.js">jasmine-test-bootstrap.js</a>, provides our configuration for Dojo. The second is Dojo itself.</p></div><div class="section"><h3>Testing Your AMD Modules<a name="Testing_Your_AMD_Modules"></a></h3><p>To test your AMD module create a new JavaScript file in opensocial-explorer-webcontent/src/test/javascript. Your JavaScript file should look like this</p>
<div class="source"><pre class="prettyprint linenums">define(['modules/path/MyModule'], function(MyModule)) {
  describe('My super module', function() {
    it('can do amazing things', function() {
      //Test that your module can do amazing things
    });
  });
});
</pre></div><p>The key here is that your tests start with a define call to load the module(s) you will be testing. You can then easily run your tests using a simple Maven command.</p>
<div class="source"><pre class="prettyprint linenums">$ cd opensocial-explorer-webcontent
$ mvn jasmine:bdd
</pre></div><p>This should output something like</p>
<div class="source"><pre class="prettyprint linenums">....
Server started--it's time to spec some JavaScript! You can run your specs as you develop by visiting this URL in a web browser: 

http://localhost:8234

The server will monitor these two directories for scripts that you add, remove, and change:

source directory: src/main/javascript

spec directory: src/test

Just leave this process running as you test-drive your code, refreshing your browser window to re-run your specs. You can kill the server with Ctrl-C when you're done.
</pre></div><p>To run your tests just open a browser and go to <a class="externalLink" href="http://localhost:8234">http://localhost:8234</a>. You can then continue to make changes to your test and just refresh the page to run them. After you are done you want to make sure you build the opensocial-explorer-webcontent module to make sure the tests pass in headless mode as well.</p>
<div class="source"><pre class="prettyprint linenums">$ cd opensocial-explorer-webcontent
$ mvn
</pre></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2013
                        <a href="http://opensocial.org">OpenSocial Foundation</a>.
            All Rights Reserved.      
                    
      </div>

        
        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="http://www.ohloh.net/p/OpenSocialExplorer/widgets/project_thin_badge.js"></script>
    </div>
        </div>
    </footer>
  </body>
</html>